#!/bin/bash

CURRENT_OS="OSX"

osType=$(uname)
    case "$osType" in
            "Darwin")
            {
                CURRENT_OS="OSX"
            } ;;
            "Linux")
            {
                # If available, use LSB to identify distribution
                if [ -f /etc/lsb-release -o -d /etc/lsb-release.d ]; then
                    DISTRO=$(gawk -F= '/^NAME/{print $2}' /etc/os-release)
                else
                    DISTRO=$(ls -d /etc/[A-Za-z]*[_-][rv]e[lr]* | grep -v "lsb" | cut -d'/' -f3 | cut -d'-' -f1 | cut -d'_' -f1)
                fi
                CURRENT_OS=$(echo $DISTRO | tr 'a-z' 'A-Z')
            } ;;
            *)
            {
                echo "Unsupported OS, exiting"
                exit
            } ;;
    esac

if [ -d $HOME/.composer ]; then
   home=$HOME/.composer
else
    if [ -d $HOME/.config/composer ]; then
       home=$HOME/.config/composer
    else
        echo 'The composer path notfound'
    fi
fi

if [ $CURRENT_OS == OSX ]; then
    echo "" >> $HOME/.bash_profile
    echo "# Composer path : added by josh/console" >> $HOME/.bash_profile
    echo "export PATH=$PATH:$home/vendor/bin" >> $HOME/.bash_profile
    source $HOME/.bash_profile
else
    echo "" >> $HOME/.bashrc
    echo "# Composer path : added by josh/console" >> $HOME/.bashrc
    echo "export PATH=$home/vendor/bin" >> $HOME/.bashrc
    source $HOME/.bashrc
fi

